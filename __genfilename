const fs = require('fs');
const crypto = require('crypto');

function generateUniqueFilename(extension = '') {
  // Generate a random 8-character hexadecimal string
  const randomString = crypto.randomBytes(4).toString('hex');

  // Get the current timestamp in milliseconds
  const timestamp = Date.now();

  // Combine the timestamp and random string with the provided extension
  const filename = `${timestamp}${randomString}${extension}`;

  // Truncate the filename to 16 characters or less
  const truncatedFilename = filename.slice(0, 16);

  return truncatedFilename;
}

// Example usage:
const uniqueFilename = generateUniqueFilename('.txt');
console.log('Unique Filename:', uniqueFilename);

// You can use the generated filename to create or save a file:
fs.writeFile(uniqueFilename, 'Hello, world!', (err) => {
  if (err) {
    console.error('Error writing file:', err);
  } else {
    console.log('File saved successfully.');
  }
});
